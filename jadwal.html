<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jadwal Rilis Full - NekoStream</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="config.js"></script>
        <style>
        body { background-color: #0d1117; color: #e0e0e0; font-family: sans-serif; }
        
        /* Font & Shadow untuk Card */
        .card-font { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .text-shadow { text-shadow: 1px 1px 2px rgba(0,0,0,0.8); }

        /* Style Navigasi Asli (Request Awal) */
        .nav-link {
            color: #e5e7eb; /* Gray-200 */
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            transition: color 0.2s;
        }
        .nav-link:hover { color: #60a5fa; } /* Blue-400 */
        .nav-link.active { color: #3b82f6; font-weight: bold; } /* Blue-500 */
    </style>
</head>
<body class="font-sans antialiased min-h-screen flex flex-col pb-20">

    <header class="bg-[#161b22] border-b border-[#30363d] sticky top-0 z-50 p-4 shadow-lg">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
            
            <a href="index.html" class="text-2xl font-bold text-white tracking-wider flex items-center gap-2 hover:text-blue-400 transition-colors">
                <span class="text-blue-500 text-3xl"></span> NekoStream
            </a>

            <nav class="flex flex-wrap justify-center gap-6">
                <a href="index.html" class="nav-link" id="nav-home">Home</a>
                <a href="ongoing.html" class="nav-link" id="nav-ongoing">On Going</a>
                <a href="jadwal.html" class="nav-link" id="nav-jadwal">Jadwal Rilis</a>
                <a href="list-anime.html" class="nav-link" id="nav-list">List Anime</a>
                <a href="genre.html" class="nav-link" id="nav-genre">List Genre</a>
            </nav>

        </div>
    </header>
    
    <main class="container mx-auto p-2 md:p-4 max-w-5xl">
        <div class="flex items-center justify-between mb-6 border-b border-[#30363d] pb-4">
            <h1 class="text-xl font-bold text-white uppercase tracking-wide">ðŸ“… SEMUA JADWAL TAYANG</h1>
            <span class="text-xs text-gray-400 bg-[#161b22] px-3 py-1 rounded border border-[#30363d]" id="total-anime-count">...</span>
        </div>

        <div id="loading" class="text-center py-20">
            <div class="inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-2"></div>
            <p class="text-gray-500 text-xs">Memuat jadwal...</p>
        </div>

        <div id="anime-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 hidden"></div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetchFullJadwal();
        });

        async function fetchFullJadwal() {
            const loading = document.getElementById('loading');
            const grid = document.getElementById('anime-grid');
            const countLabel = document.getElementById('total-anime-count');
            
            const baseURL = (typeof API_BASE_URL !== 'undefined') ? API_BASE_URL : "http://localhost:3000";

            try {
                const req = await fetch(`${baseURL}/otakudesu/schedule`);
                if(!req.ok) throw new Error("Gagal fetch data");
                
                const res = await req.json();
                const daysData = res.data?.scheduleList || [];
                
                let allAnime = [];
                
                daysData.forEach(dayItem => {
                    const dayName = dayItem.title || "Unknown"; 
                    const list = dayItem.animeList || [];
                    
                    list.forEach(anime => {
                        anime.releaseDay = dayName; 
                        allAnime.push(anime);
                    });
                });

                countLabel.innerText = `${allAnime.length} Anime`;

                if(allAnime.length === 0) {
                    grid.innerHTML = '<p class="col-span-full text-center text-gray-500 text-xs">Jadwal kosong.</p>';
                } else {
                    renderCards(allAnime);
                }

                loading.classList.add('hidden');
                grid.classList.remove('hidden');

            } catch (err) {
                console.error(err);
                grid.innerHTML = `<div class="col-span-full text-center text-red-500 text-xs py-10">Error: ${err.message}</div>`;
                loading.classList.add('hidden');
                grid.classList.remove('hidden');
            }
        }

        function renderCards(list) {
            const grid = document.getElementById('anime-grid');
            let html = '';

            list.forEach(anime => {
                const id = anime.animeId || anime.id;
                const day = anime.releaseDay;

                // Warna badge hari
                let badgeColor = 'bg-blue-600';
                if(day === 'Minggu') badgeColor = 'bg-red-600';
                if(day === 'Jumat') badgeColor = 'bg-green-600';

                // --- MODIFIKASI: HAPUS BAGIAN POSTER ---
                // Kita ganti jadi kartu text yang simple dan elegan
                
                html += `
                <a href="detail.html?id=${id}" class="group relative flex flex-col bg-[#161b22] border border-[#30363d] p-4 rounded-lg hover:border-blue-500 hover:shadow-lg hover:shadow-blue-900/10 transition-all duration-300">
                    
                    <div class="flex justify-between items-start mb-3">
                        <span class="${badgeColor} text-white text-[10px] font-bold px-2 py-1 rounded shadow uppercase tracking-wide">
                            ${day}
                        </span>
                        
                        <svg class="w-4 h-4 text-gray-600 group-hover:text-blue-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </div>

                    <h3 class="text-gray-200 text-sm font-semibold leading-relaxed group-hover:text-blue-400 transition-colors line-clamp-2">
                        ${anime.title}
                    </h3>
                    
                    <div class="absolute -bottom-2 -right-2 w-16 h-16 bg-blue-500/5 rounded-full blur-xl group-hover:bg-blue-500/10 transition-all"></div>
                </a>`;
            });
            grid.innerHTML = html;
        }
    </script>
</body>
</html>


